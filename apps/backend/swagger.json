{"openapi":"3.0.0","paths":{"/health":{"get":{"operationId":"HealthController_check","parameters":[],"responses":{"200":{"description":""}},"tags":["Health"]}},"/auth/discord":{"get":{"operationId":"AuthController_discordAuth","parameters":[],"responses":{"302":{"description":"Discordの認証ページにリダイレクト"}},"summary":"Discordログイン開始","tags":["Auth"]}},"/auth/discord/callback":{"get":{"operationId":"AuthController_discordAuthCallback","parameters":[],"responses":{"200":{"description":"Discord認証成功"}},"summary":"Discord認証コールバック","tags":["Auth"]}},"/auth/servers":{"get":{"operationId":"AuthController_getDiscordServers","parameters":[],"responses":{"200":{"description":"Discordサーバー取得成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetUserServersResponse"}}}}},"summary":"Discordサーバー取得","tags":["Auth"]}},"/user":{"get":{"operationId":"UserController_findAll","parameters":[{"name":"name","required":false,"in":"query","description":"ユーザー名","schema":{"type":"string"}},{"name":"take","required":false,"in":"query","description":"取得件数","schema":{"minimum":1,"type":"number"}},{"name":"skip","required":false,"in":"query","description":"取得開始位置","schema":{"minimum":0,"type":"number"}}],"responses":{"200":{"description":"検索条件に当てはまるユーザの取得成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FindAllUser"}}}}},"summary":"検索条件に当てはまるユーザの全取得","tags":["User"]}},"/user/login":{"get":{"operationId":"UserController_login","parameters":[],"responses":{"200":{"description":"最終ログイン時間の更新と自身のデータ取得成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"401":{"description":"Unauthorized"}},"summary":"認証済みでのログイン","tags":["User"]}},"/user/me":{"get":{"operationId":"UserController_me","parameters":[],"responses":{"200":{"description":"ログイン中のユーザの取得成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}}},"summary":"ログイン中のユーザの取得","tags":["User"]}},"/user/{id}":{"get":{"operationId":"UserController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"指定したユーザの取得成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"404":{"description":"User not found"}},"summary":"指定したユーザの取得","tags":["User"]},"patch":{"operationId":"UserController_update","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUserDto"}}}},"responses":{"200":{"description":"ユーザの更新成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}}},"summary":"ユーザの更新","tags":["User"]},"delete":{"operationId":"UserController_remove","parameters":[],"responses":{"200":{"description":"ユーザの削除成功"}},"summary":"ユーザの削除","tags":["User"]}},"/servers/join":{"post":{"operationId":"ServersController_join","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/JoinServerDto"}}}},"responses":{"200":{"description":"サーバーに参加しました","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServerWithServerUser"}}}}},"summary":"サーバーに参加する","tags":["Servers"]}},"/servers/me/server-user":{"get":{"operationId":"ServersController_findMeServerUser","parameters":[{"name":"serverId","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"サーバーに参加しているかどうか","content":{"application/json":{"schema":{"type":"boolean"}}}}},"summary":"自身がサーバーに参加しているかどうかを取得する","tags":["Servers"]}},"/servers/fav/{id}":{"patch":{"operationId":"ServersController_addFavorite","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddFavServerDto"}}}},"responses":{"200":{"description":"サーバーをお気に入りに追加しました","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServerUser"}}}}},"summary":"サーバーをお気に入りに追加する","tags":["Servers"]}},"/calendars":{"post":{"operationId":"CalendarsController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCalendarDto"}}}},"responses":{"201":{"description":"カレンダー作成成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CalendarWithRelations"}}}}},"tags":["Calendars"]},"get":{"operationId":"CalendarsController_findAll","parameters":[],"responses":{"200":{"description":""}},"tags":["Calendars"]}},"/calendars/{id}":{"get":{"operationId":"CalendarsController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}},{"name":"fromDate","required":false,"in":"query","schema":{"type":"string"}},{"name":"toDate","required":false,"in":"query","schema":{"type":"string"}}],"responses":{"201":{"description":"カレンダー取得成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CalendarWithRelations"}}}}},"tags":["Calendars"]},"patch":{"operationId":"CalendarsController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateCalendarDto"}}}},"responses":{"200":{"description":"カレンダー更新成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CalendarWithRelations"}}}}},"tags":["Calendars"]}},"/schedules/{calendarId}/public":{"post":{"operationId":"SchedulesController_createPublicSchedule","parameters":[{"name":"calendarId","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"description":"公開スケジュール作成リクエスト","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreatePublicScheduleDto"}}}},"responses":{"200":{"description":"公開スケジュール作成成功"}},"summary":"公開スケジュール作成","tags":["Schedules"]},"get":{"operationId":"SchedulesController_findPublicSchedules","parameters":[{"name":"fromDate","required":false,"in":"query","description":"取得開始日","schema":{"format":"date-time","type":"string"}},{"name":"toDate","required":false,"in":"query","description":"取得終了日","schema":{"format":"date-time","type":"string"}},{"name":"calendarId","required":true,"in":"path","schema":{"type":"string"}},{"description":"取得開始日","required":false,"name":"fromDate","in":"query","schema":{"format":"date-time"}},{"description":"取得終了日","required":false,"name":"toDate","in":"query","schema":{"format":"date-time"}}],"responses":{"200":{"description":"公開スケジュール取得成功","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PublicScheduleWithRelations"}}}}}},"summary":"公開スケジュール取得","tags":["Schedules"]}},"/schedules/{calendarId}/personal":{"post":{"description":"指定された期間の個人スケジュールを一括で作成・更新します","operationId":"SchedulesController_upsertPersonalSchedules","parameters":[{"name":"calendarId","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"description":"個人スケジュール作成リクエスト","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UpsertPersonalScheduleDto"}}}}},"responses":{"201":{"description":"個人スケジュール作成成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PersonalSchedule"}}}}},"summary":"個人スケジュールの一括更新","tags":["Schedules"]}},"/schedules":{"get":{"operationId":"SchedulesController_findAll","parameters":[],"responses":{"200":{"description":""}},"tags":["Schedules"]}},"/schedules/{calendarId}/me/personal":{"get":{"operationId":"SchedulesController_findMyPersonalSchedules","parameters":[{"name":"calendarId","required":true,"in":"path","schema":{"type":"string"}},{"name":"fromDate","required":false,"in":"query","description":"取得開始日","schema":{"format":"date-time","type":"string"}},{"name":"toDate","required":false,"in":"query","description":"取得終了日","schema":{"format":"date-time","type":"string"}},{"description":"取得開始日","required":false,"name":"fromDate","in":"query","schema":{"format":"date-time"}},{"description":"取得終了日","required":false,"name":"toDate","in":"query","schema":{"format":"date-time"}}],"responses":{"200":{"description":"ユーザーの個人スケジュール取得成功","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PersonalScheduleWithRelations"}}}}}},"summary":"ユーザーの個人スケジュール取得","tags":["Schedules"]}},"/schedules/{calendarId}/all-schedules":{"get":{"operationId":"SchedulesController_findAllUserSchedules","parameters":[{"name":"calendarId","required":true,"in":"path","schema":{"type":"string"}},{"name":"fromDate","required":true,"in":"query","description":"開始日","schema":{"format":"date-time","example":"2024-01-01","type":"string"}},{"name":"toDate","required":true,"in":"query","description":"終了日","schema":{"format":"date-time","example":"2024-01-31","type":"string"}},{"description":"開始日","name":"fromDate","in":"query","required":true,"schema":{"format":"date-time","example":"2024-01-01"}},{"description":"終了日","name":"toDate","in":"query","required":true,"schema":{"format":"date-time","example":"2024-01-31"}}],"responses":{"200":{"description":"ユーザーのスケジュール取得成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AllUserSchedules"}}}}},"summary":"ユーザーのスケジュール取得","tags":["Schedules"]}},"/schedules/{id}/public":{"patch":{"operationId":"SchedulesController_updatePublicSchedule","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"description":"公開スケジュール更新リクエスト","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdatePublicScheduleDto"}}}},"responses":{"200":{"description":"公開スケジュール更新成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublicScheduleWithRelations"}}}}},"summary":"公開スケジュール更新","tags":["Schedules"]},"delete":{"operationId":"SchedulesController_removePublicSchedule","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"description":"公開スケジュール削除リクエスト","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RemovePublicScheduleDto"}}}},"responses":{"200":{"description":"公開スケジュール削除成功"}},"summary":"公開スケジュール削除","tags":["Schedules"]}},"/schedules/{id}/personal":{"delete":{"operationId":"SchedulesController_removePersonalSchedule","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"description":"個人スケジュール削除リクエスト","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RemovePersonalScheduleDto"}}}},"responses":{"204":{"description":"個人スケジュール削除成功"}},"summary":"個人スケジュール削除","tags":["Schedules"]}}},"info":{"title":"GFC Scheduler API","description":"GFC Scheduler API description","version":"1.0","contact":{}},"tags":[],"servers":[],"components":{"schemas":{"Calendar":{"type":"object","properties":{"id":{"type":"string","description":"カレンダーID"},"serverId":{"type":"string","description":"サーバーID"},"name":{"type":"string","description":"カレンダー名"},"createdAt":{"format":"date-time","type":"string","description":"作成日"},"updatedAt":{"format":"date-time","type":"string","description":"更新日"}},"required":["id","serverId","name","createdAt","updatedAt"]},"ServerUser":{"type":"object","properties":{"userId":{"type":"string","description":"サーバーに参加しているユーザーID"},"serverId":{"type":"string","description":"サーバーID"},"isFavorite":{"type":"boolean","description":"お気に入りかどうか"},"isJoined":{"type":"boolean","description":"参加しているかどうか"},"createdAt":{"format":"date-time","type":"string","description":"参加日時"},"updatedAt":{"format":"date-time","type":"string","description":"更新日時"}},"required":["userId","serverId","isFavorite","isJoined","createdAt","updatedAt"]},"ServerWithRelations":{"type":"object","properties":{"id":{"type":"string","description":"サーバーID"},"name":{"type":"string","description":"サーバー名"},"icon":{"type":"string","description":"サーバーアイコンURL","nullable":true},"calendars":{"description":"カレンダー","type":"array","items":{"$ref":"#/components/schemas/Calendar"}},"serverUsers":{"description":"サーバーに参加しているユーザー","type":"array","items":{"$ref":"#/components/schemas/ServerUser"}}},"required":["id","name","icon","calendars","serverUsers"]},"GetUserServersResponse":{"type":"object","properties":{"data":{"description":"サーバー","type":"array","items":{"$ref":"#/components/schemas/ServerWithRelations"}},"calendarCount":{"type":"number","description":"カレンダー数"}},"required":["data","calendarCount"]},"User":{"type":"object","properties":{"id":{"type":"string","description":"DiscordユーザID"},"name":{"type":"string","description":"ユーザー名"},"avatar":{"type":"string","description":"アバター画像URL","nullable":true},"createdAt":{"format":"date-time","type":"string","description":"作成日時"},"updatedAt":{"format":"date-time","type":"string","description":"更新日時"},"lastLoggedInAt":{"format":"date-time","type":"string","description":"最終ログイン日時"}},"required":["id","name","avatar","createdAt","updatedAt","lastLoggedInAt"]},"FindAllUser":{"type":"object","properties":{"users":{"description":"ユーザー一覧","type":"array","items":{"$ref":"#/components/schemas/User"}},"total":{"type":"number","description":"総件数"}},"required":["users","total"]},"UpdateUserDto":{"type":"object","properties":{"name":{"type":"string","description":"ユーザ名"}}},"JoinServerDto":{"type":"object","properties":{"serverId":{"type":"string","description":"参加するサーバーのID"},"serverName":{"type":"string","description":"参加するサーバーの名前"},"serverIcon":{"type":"string","description":"参加するサーバーのアイコン"}},"required":["serverId","serverName","serverIcon"]},"ServerWithServerUser":{"type":"object","properties":{"id":{"type":"string","description":"サーバーID"},"name":{"type":"string","description":"サーバー名"},"icon":{"type":"string","description":"サーバーアイコンURL","nullable":true},"serverUser":{"description":"サーバーに参加しているユーザー","allOf":[{"$ref":"#/components/schemas/ServerUser"}]}},"required":["id","name","icon","serverUser"]},"AddFavServerDto":{"type":"object","properties":{"isFavorite":{"type":"boolean","description":"お気に入りフラグ"},"serversList":{"description":"サーバーのメンバーかどうか","type":"array","items":{"$ref":"#/components/schemas/ServerWithRelations"}}},"required":["isFavorite","serversList"]},"CreateCalendarDto":{"type":"object","properties":{"name":{"type":"string","description":"カレンダー名"},"serverId":{"type":"string","description":"サーバーID"},"serverName":{"type":"string","description":"サーバー名"},"icon":{"type":"string","description":"サーバーアイコンURL","nullable":true}},"required":["name","serverId","serverName","icon"]},"Server":{"type":"object","properties":{"id":{"type":"string","description":"サーバーID"},"name":{"type":"string","description":"サーバー名"},"icon":{"type":"string","description":"サーバーアイコンURL","nullable":true}},"required":["id","name","icon"]},"Participant":{"type":"object","properties":{"userId":{"type":"string","description":"参加者ID"},"name":{"type":"string","description":"参加者名"},"reaction":{"type":"string","description":"参加者反応","enum":["OK","UNDECIDED","NG"]},"createdAt":{"format":"date-time","type":"string","description":"参加者反応日"},"updatedAt":{"format":"date-time","type":"string","description":"参加者反応更新日"}},"required":["userId","name","reaction","createdAt","updatedAt"]},"ServerUserWithRelations":{"type":"object","properties":{"userId":{"type":"string","description":"サーバーに参加しているユーザーID"},"serverId":{"type":"string","description":"サーバーID"},"isFavorite":{"type":"boolean","description":"お気に入りかどうか"},"isJoined":{"type":"boolean","description":"参加しているかどうか"},"createdAt":{"format":"date-time","type":"string","description":"参加日時"},"updatedAt":{"format":"date-time","type":"string","description":"更新日時"},"user":{"description":"ユーザー","allOf":[{"$ref":"#/components/schemas/User"}]}},"required":["userId","serverId","isFavorite","isJoined","createdAt","updatedAt","user"]},"PublicScheduleWithRelations":{"type":"object","properties":{"id":{"type":"string","description":"ID"},"date":{"type":"string","description":"日付"},"title":{"type":"string","description":"タイトル"},"description":{"type":"string","description":"説明"},"createdBy":{"type":"string","description":"作成者名"},"updatedBy":{"type":"string","description":"更新者名"},"createdAt":{"format":"date-time","type":"string","description":"作成日"},"updatedAt":{"format":"date-time","type":"string","description":"更新日"},"quota":{"type":"number","description":"募集人数"},"isRecruiting":{"type":"boolean","description":"募集状況"},"isPersonal":{"type":"boolean","description":"個人予定フラグ","default":false},"isDeleted":{"type":"boolean","description":"削除フラグ","default":false},"participants":{"description":"参加者","type":"array","items":{"$ref":"#/components/schemas/Participant"}},"serverUser":{"description":"サーバユーザ","allOf":[{"$ref":"#/components/schemas/ServerUserWithRelations"}]}},"required":["id","date","title","description","createdBy","updatedBy","createdAt","updatedAt","quota","isRecruiting","isPersonal","isDeleted","participants","serverUser"]},"PersonalScheduleWithRelations":{"type":"object","properties":{"id":{"type":"string","description":"ID"},"date":{"type":"string","description":"日付"},"title":{"type":"string","description":"タイトル"},"description":{"type":"string","description":"説明"},"createdBy":{"type":"string","description":"作成者名"},"updatedBy":{"type":"string","description":"更新者名"},"createdAt":{"format":"date-time","type":"string","description":"作成日"},"updatedAt":{"format":"date-time","type":"string","description":"更新日"},"isPrivate":{"type":"boolean","description":"非公開フラグ"},"isFree":{"type":"boolean","description":"空き予定フラグ"},"isPersonal":{"type":"boolean","description":"個人予定フラグ","default":true},"serverUser":{"description":"サーバユーザ","allOf":[{"$ref":"#/components/schemas/ServerUserWithRelations"}]}},"required":["id","date","title","description","createdBy","updatedBy","createdAt","updatedAt","isPrivate","isFree","isPersonal","serverUser"]},"CalendarWithRelations":{"type":"object","properties":{"id":{"type":"string","description":"カレンダーID"},"serverId":{"type":"string","description":"サーバーID"},"name":{"type":"string","description":"カレンダー名"},"createdAt":{"format":"date-time","type":"string","description":"作成日"},"updatedAt":{"format":"date-time","type":"string","description":"更新日"},"server":{"description":"サーバー","allOf":[{"$ref":"#/components/schemas/Server"}]},"publicSchedules":{"description":"公開予定","type":"array","items":{"$ref":"#/components/schemas/PublicScheduleWithRelations"}},"personalSchedules":{"description":"個人予定","type":"array","items":{"$ref":"#/components/schemas/PersonalScheduleWithRelations"}}},"required":["id","serverId","name","createdAt","updatedAt","server","publicSchedules","personalSchedules"]},"UpdateCalendarDto":{"type":"object","properties":{"name":{"type":"string","description":"カレンダー名","example":"テストカレンダー"}},"required":["name"]},"CreatePublicScheduleDto":{"type":"object","properties":{"date":{"format":"date-time","type":"string","description":"日付"},"title":{"type":"string","description":"タイトル"},"description":{"type":"string","description":"説明"},"quota":{"type":"number","description":"募集人数"}},"required":["date","title"]},"UpsertPersonalScheduleDto":{"type":"object","properties":{"date":{"type":"string","description":"日付"},"title":{"type":"string","description":"タイトル"},"description":{"type":"string","description":"説明"},"isPrivate":{"type":"boolean","description":"非公開フラグ"},"isFree":{"type":"boolean","description":"空きフラグ"}},"required":["date"]},"PersonalSchedule":{"type":"object","properties":{"id":{"type":"string","description":"ID"},"date":{"type":"string","description":"日付"},"title":{"type":"string","description":"タイトル"},"description":{"type":"string","description":"説明"},"createdBy":{"type":"string","description":"作成者名"},"updatedBy":{"type":"string","description":"更新者名"},"createdAt":{"format":"date-time","type":"string","description":"作成日"},"updatedAt":{"format":"date-time","type":"string","description":"更新日"},"isPrivate":{"type":"boolean","description":"非公開フラグ"},"isFree":{"type":"boolean","description":"空き予定フラグ"},"isPersonal":{"type":"boolean","description":"個人予定フラグ","default":true}},"required":["id","date","title","description","createdBy","updatedBy","createdAt","updatedAt","isPrivate","isFree","isPersonal"]},"AllUserSchedules":{"type":"object","properties":{"personalSchedules":{"description":"個人スケジュール","type":"array","items":{"$ref":"#/components/schemas/PersonalScheduleWithRelations"}},"publicSchedules":{"description":"公開スケジュール","type":"array","items":{"$ref":"#/components/schemas/PublicScheduleWithRelations"}}},"required":["personalSchedules","publicSchedules"]},"UpdatePublicScheduleDto":{"type":"object","properties":{"date":{"format":"date-time","type":"string","description":"日付"},"title":{"type":"string","description":"タイトル"},"description":{"type":"string","description":"説明"},"quota":{"type":"number","description":"募集人数"},"calendarId":{"type":"string","description":"カレンダーID"}},"required":["calendarId"]},"RemovePublicScheduleDto":{"type":"object","properties":{"calendarId":{"type":"string","description":"カレンダーID"},"isDeleted":{"type":"boolean","description":"削除フラグ"}},"required":["calendarId","isDeleted"]},"RemovePersonalScheduleDto":{"type":"object","properties":{"calendarId":{"type":"string","description":"カレンダーID"}},"required":["calendarId"]}}}}